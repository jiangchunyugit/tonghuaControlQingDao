<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.thinkfree.database.mapper.AgencyContractMapper">
  <resultMap id="newBaseResultMap" type="cn.thinkfree.database.vo.agency.MyAgencyContract">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
 <!--   <result column="t.id" jdbcType="INTEGER" property="id" />-->
    <result column="contract_number" jdbcType="VARCHAR" property="contractNumber" />
    <result column="company_id" jdbcType="VARCHAR" property="companyId" />
    <result column="end_time" jdbcType="TIMESTAMP" property="endTime" />
    <result column="status" jdbcType="VARCHAR" property="status" />
    <result column="filiale_name" jdbcType="VARCHAR" property="filialeName" />
    <result column="filiale_id" jdbcType="VARCHAR" property="filialeId" />
    <result column="metro_name" jdbcType="VARCHAR" property="metroName" />
    <result column="metro_id" jdbcType="VARCHAR" property="metroId" />
    <result column="store_name" jdbcType="VARCHAR" property="storeName" />
    <result column="store_id" jdbcType="INTEGER" property="storeId" />
    <result column="owner_name" jdbcType="VARCHAR" property="ownerName" />
    <result column="agent_name" jdbcType="VARCHAR" property="agentName" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="pdf_url" jdbcType="VARCHAR" property="pdfUrl" />
      <result column="company_name" jdbcType="VARCHAR" property="companyName" />

      <result property="brand_name" column="brandName"/>
      <result property="brand_no" column="brandNo"/>
      <result property="category_name" column="categoryName"/>
      <result property="category_no" column="categoryNo"/>
      <result property="shop_name" column="shopName"/>
      <result property="shop_code" column="shopCode"/>
      <result property="service_ratio" column="serviceRatio"/>




  </resultMap>
  <sql id="new_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    t.contract_number, t.company_id, end_time, status, filiale_name, filiale_id, metro_name,
    metro_id, store_name, store_id, owner_name, agent_name, create_time, update_time,company_name,
    pdf_url,f.*
  </sql>

  <select id="selectPageList"  parameterType="cn.thinkfree.database.vo.agency.AgencySEO" resultMap="newBaseResultMap">
      select

      <include refid="new_Column_List" />
      from pc_agency_contract t
    left join pc_agency_contract_terms  f
    on t.contract_number = f.contract_number
      <if test="_parameter != null">
        <include refid="my_Where_Clause" />
      </if>
    <!--  <if test="orderByClause != null">
        order by ${orderByClause}
      </if>-->
  </select>

    <select id="selectoperatingPageList"  parameterType="cn.thinkfree.database.vo.agency.AgencySEO" resultMap="newBaseResultMap">
        select

        <include refid="new_Column_List" />
        from pc_agency_contract t
        left join pc_agency_contract_terms  f
        on t.contract_number = f.contract_number
        <if test="_parameter != null">
            <include refid="my_Where_Clause_one" />
        </if>
        <!--  <if test="orderByClause != null">
            order by ${orderByClause}
          </if>-->
    </select>


    <select id="selectFinancialPageList"  parameterType="cn.thinkfree.database.vo.agency.AgencySEO" resultMap="newBaseResultMap">
        select

        <include refid="new_Column_List" />
        from pc_agency_contract t
        left join pc_agency_contract_terms  f
        on t.contract_number = f.contract_number
        <if test="_parameter != null">
            <include refid="my_Where_Clause_two" />
        </if>
        <!--  <if test="orderByClause != null">
            order by ${orderByClause}
          </if>-->
    </select>








  <sql id="my_Where_Clause">

    <where>
        1 = 1
        and  ( status = '0' or   status = '3' or  status = '5'  or    status = '6'  or   status = '7'   or   status = '8'  or   status = '9'  or   status = '10' or    status = '11')
      <if test="contractNumber!= null and contractNumber != ''">
        and   t.contract_number LIKE concat(concat('%',#{contractNumber}),'%')
      </if>
    <if test="agency!= null and agency != ''">
       and   t.company_id LIKE concat(concat('%',#{agency}),'%')
     </if>
     <if test="agency!= null and agency != ''">
       and   t.company_name LIKE concat(concat('%',#{agency}),'%')
     </if>
     <if test="brand!= null and brand != ''">
       and   brand_no LIKE concat(concat('%',#{brand}),'%')
     </if>
     <if test="brand!= null and brand != ''">
       and   brand_name LIKE concat(concat('%',#{brand}),'%')
     </if>

     <if test="category!= null and category != ''">
       and   category_name LIKE concat(concat('%',#{category}),'%')
     </if>
     <if test="category!= null and category != ''">
       and   category_no LIKE concat(concat('%',#{category}),'%')
     </if>

     <if test="status != null and status != ''">
       and   status =#{status}
     </if>
     <if test="startTime != null and startTime!=''">
      <![CDATA[ AND end_time &gt;=#{startTime}]]>
     </if>
     <if test="endTime != null and endTime!=''">
       <![CDATA[ AND  end_time &lt;=#{endTime} ]]>
     </if>
     <if test="filialeId != null and filialeId != ''">
       AND  filiale_id =#{filialeId}
     </if>
     <if test="metroId!=null and metroId != ''">
       AND  metro_id = #{metroId}
     </if>
      <!--
-->
   </where>
  </sql>


    <sql id="my_Where_Clause_one">

        <where>
            1 = 1
            and  status = '1'
            <if test="contractNumber!= null and contractNumber != ''">
                and   t.contract_number LIKE concat(concat('%',#{contractNumber}),'%')
            </if>
            <if test="agency!= null and agency != ''">
                and   t.company_id LIKE concat(concat('%',#{agency}),'%')
            </if>
            <if test="agency!= null and agency != ''">
                and   t.company_name LIKE concat(concat('%',#{agency}),'%')
            </if>
            <if test="brand!= null and brand != ''">
                and   brand_no LIKE concat(concat('%',#{brand}),'%')
            </if>
            <if test="brand!= null and brand != ''">
                and   brand_name LIKE concat(concat('%',#{brand}),'%')
            </if>

            <if test="category!= null and category != ''">
                and   category_name LIKE concat(concat('%',#{category}),'%')
            </if>
            <if test="category!= null and category != ''">
                and   category_no LIKE concat(concat('%',#{category}),'%')
            </if>

            <if test="status != null and status != ''">
                and   status =#{status}
            </if>
            <if test="startTime != null and startTime!=''">
                <![CDATA[ AND end_time &gt;=#{startTime}]]>
            </if>
            <if test="endTime != null and endTime!=''">
                <![CDATA[ AND  end_time &lt;=#{endTime} ]]>
            </if>
            <if test="filialeId != null and filialeId != ''">
                AND  filiale_id =#{filialeId}
            </if>
            <if test="metroId!=null and metroId != ''">
                AND  metro_id = #{metroId}
            </if>
            <!--
      -->
        </where>
    </sql>



    <sql id="my_Where_Clause_two">

        <where>
            1 = 1
            and  status = '4'
            <if test="contractNumber!= null and contractNumber != ''">
                and   t.contract_number LIKE concat(concat('%',#{contractNumber}),'%')
            </if>
            <if test="agency!= null and agency != ''">
                and   t.company_id LIKE concat(concat('%',#{agency}),'%')
            </if>
            <if test="agency!= null and agency != ''">
                and   t.company_name LIKE concat(concat('%',#{agency}),'%')
            </if>
            <if test="brand!= null and brand != ''">
                and   brand_no LIKE concat(concat('%',#{brand}),'%')
            </if>
            <if test="brand!= null and brand != ''">
                and   brand_name LIKE concat(concat('%',#{brand}),'%')
            </if>

            <if test="category!= null and category != ''">
                and   category_name LIKE concat(concat('%',#{category}),'%')
            </if>
            <if test="category!= null and category != ''">
                and   category_no LIKE concat(concat('%',#{category}),'%')
            </if>

            <if test="status != null and status != ''">
                and   status =#{status}
            </if>
            <if test="startTime != null and startTime!=''">
                <![CDATA[ AND end_time &gt;=#{startTime}]]>
            </if>
            <if test="endTime != null and endTime!=''">
                <![CDATA[ AND  end_time &lt;=#{endTime} ]]>
            </if>
            <if test="filialeId != null and filialeId != ''">
                AND  filiale_id =#{filialeId}
            </if>
            <if test="metroId!=null and metroId != ''">
                AND  metro_id = #{metroId}
            </if>
            <!--
      -->
        </where>
    </sql>

</mapper>