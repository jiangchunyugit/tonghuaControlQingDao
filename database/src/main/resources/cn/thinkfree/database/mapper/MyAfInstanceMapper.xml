<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.thinkfree.database.mapper.AfInstanceMapper">
  <select id="getProjectCheckResult" resultType="java.lang.Integer">
    select status
    from a_f_instance
    where project_no = #{projectNo}
    and config_no = #{configNo}
    and status in (2, 3)
    and create_time = max (create_time)
  </select>

  <select id="getProjectCheckResults" resultType="java.util.Map">
    select project_no projectNo, status
    from a_f_instance
    where project_no in
    <foreach collection="projectNos" item="projectNo" separator="," open="(" close=")">
      ${key}
    </foreach>
    and config_no = #{configNo}
    and status in (2, 3)
    and create_time = max (create_time)
    group by project_no
  </select>
</mapper>