<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.thinkfree.database.mapper.ProjectMapper">
    <resultMap id="BaseResultMap" type="cn.thinkfree.database.model.Project">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="company_id" jdbcType="VARCHAR" property="companyId"/>
        <result column="project_no" jdbcType="VARCHAR" property="projectNo"/>
        <result column="status" jdbcType="INTEGER" property="status"/>
        <result column="stage" jdbcType="INTEGER" property="stage"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="release_time" jdbcType="TIMESTAMP" property="releaseTime"/>
        <result column="order_source" jdbcType="INTEGER" property="orderSource"/>
        <result column="house_huxing" jdbcType="INTEGER" property="houseHuxing"/>
        <result column="house_room" jdbcType="INTEGER" property="houseRoom"/>
        <result column="house_office" jdbcType="INTEGER" property="houseOffice"/>
        <result column="house_toilet" jdbcType="INTEGER" property="houseToilet"/>
        <result column="address" jdbcType="VARCHAR" property="address"/>
        <result column="address_detail" jdbcType="VARCHAR" property="addressDetail"/>
        <result column="style" jdbcType="INTEGER" property="style"/>
        <result column="area" jdbcType="INTEGER" property="area"/>
        <result column="house_type" jdbcType="INTEGER" property="houseType"/>
        <result column="people_no" jdbcType="INTEGER" property="peopleNo"/>
        <result column="plan_start_time" jdbcType="TIMESTAMP" property="planStartTime"/>
        <result column="plan_end_time" jdbcType="TIMESTAMP" property="planEndTime"/>
        <result column="decoration_budget" jdbcType="INTEGER" property="decorationBudget"/>
        <result column="owner_id" jdbcType="VARCHAR" property="ownerId"/>
        <result column="balcony" jdbcType="INTEGER" property="balcony"/>
        <result column="reference_scheme" jdbcType="INTEGER" property="referenceScheme"/>
        <result column="img_url" jdbcType="VARCHAR" property="imgUrl"/>
        <result column="third_view" jdbcType="BIT" property="thirdView"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, company_id, project_no, status, stage, create_time, release_time, order_source,
        house_huxing, house_room, house_office, house_toilet, address, address_detail, style,
        area, house_type, people_no, plan_start_time, plan_end_time, decoration_budget, owner_id,
        balcony, reference_scheme, img_url, third_view
    </sql>
    <select id="selectByExample" parameterType="cn.thinkfree.database.model.ProjectExample" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from project
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from project
        where id = #{id,jdbcType=BIGINT}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from project
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <delete id="deleteByExample" parameterType="cn.thinkfree.database.model.ProjectExample">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from project
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="cn.thinkfree.database.model.Project">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into project (id, company_id, project_no,
        status, stage, create_time,
        release_time, order_source, house_huxing,
        house_room, house_office, house_toilet,
        address, address_detail, style,
        area, house_type, people_no,
        plan_start_time, plan_end_time, decoration_budget,
        owner_id, balcony, reference_scheme,
        img_url, third_view)
        values (#{id,jdbcType=BIGINT}, #{companyId,jdbcType=VARCHAR}, #{projectNo,jdbcType=VARCHAR},
        #{status,jdbcType=INTEGER}, #{stage,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP},
        #{releaseTime,jdbcType=TIMESTAMP}, #{orderSource,jdbcType=INTEGER}, #{houseHuxing,jdbcType=INTEGER},
        #{houseRoom,jdbcType=INTEGER}, #{houseOffice,jdbcType=INTEGER}, #{houseToilet,jdbcType=INTEGER},
        #{address,jdbcType=VARCHAR}, #{addressDetail,jdbcType=VARCHAR}, #{style,jdbcType=INTEGER},
        #{area,jdbcType=INTEGER}, #{houseType,jdbcType=INTEGER}, #{peopleNo,jdbcType=INTEGER},
        #{planStartTime,jdbcType=TIMESTAMP}, #{planEndTime,jdbcType=TIMESTAMP}, #{decorationBudget,jdbcType=INTEGER},
        #{ownerId,jdbcType=VARCHAR}, #{balcony,jdbcType=INTEGER}, #{referenceScheme,jdbcType=INTEGER},
        #{imgUrl,jdbcType=VARCHAR}, #{thirdView,jdbcType=BIT})
    </insert>
    <insert id="insertSelective" parameterType="cn.thinkfree.database.model.Project">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into project
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="companyId != null">
                company_id,
            </if>
            <if test="projectNo != null">
                project_no,
            </if>
            <if test="status != null">
                status,
            </if>
            <if test="stage != null">
                stage,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="releaseTime != null">
                release_time,
            </if>
            <if test="orderSource != null">
                order_source,
            </if>
            <if test="houseHuxing != null">
                house_huxing,
            </if>
            <if test="houseRoom != null">
                house_room,
            </if>
            <if test="houseOffice != null">
                house_office,
            </if>
            <if test="houseToilet != null">
                house_toilet,
            </if>
            <if test="address != null">
                address,
            </if>
            <if test="addressDetail != null">
                address_detail,
            </if>
            <if test="style != null">
                style,
            </if>
            <if test="area != null">
                area,
            </if>
            <if test="houseType != null">
                house_type,
            </if>
            <if test="peopleNo != null">
                people_no,
            </if>
            <if test="planStartTime != null">
                plan_start_time,
            </if>
            <if test="planEndTime != null">
                plan_end_time,
            </if>
            <if test="decorationBudget != null">
                decoration_budget,
            </if>
            <if test="ownerId != null">
                owner_id,
            </if>
            <if test="balcony != null">
                balcony,
            </if>
            <if test="referenceScheme != null">
                reference_scheme,
            </if>
            <if test="imgUrl != null">
                img_url,
            </if>
            <if test="thirdView != null">
                third_view,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="companyId != null">
                #{companyId,jdbcType=VARCHAR},
            </if>
            <if test="projectNo != null">
                #{projectNo,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                #{status,jdbcType=INTEGER},
            </if>
            <if test="stage != null">
                #{stage,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="releaseTime != null">
                #{releaseTime,jdbcType=TIMESTAMP},
            </if>
            <if test="orderSource != null">
                #{orderSource,jdbcType=INTEGER},
            </if>
            <if test="houseHuxing != null">
                #{houseHuxing,jdbcType=INTEGER},
            </if>
            <if test="houseRoom != null">
                #{houseRoom,jdbcType=INTEGER},
            </if>
            <if test="houseOffice != null">
                #{houseOffice,jdbcType=INTEGER},
            </if>
            <if test="houseToilet != null">
                #{houseToilet,jdbcType=INTEGER},
            </if>
            <if test="address != null">
                #{address,jdbcType=VARCHAR},
            </if>
            <if test="addressDetail != null">
                #{addressDetail,jdbcType=VARCHAR},
            </if>
            <if test="style != null">
                #{style,jdbcType=INTEGER},
            </if>
            <if test="area != null">
                #{area,jdbcType=INTEGER},
            </if>
            <if test="houseType != null">
                #{houseType,jdbcType=INTEGER},
            </if>
            <if test="peopleNo != null">
                #{peopleNo,jdbcType=INTEGER},
            </if>
            <if test="planStartTime != null">
                #{planStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="planEndTime != null">
                #{planEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="decorationBudget != null">
                #{decorationBudget,jdbcType=INTEGER},
            </if>
            <if test="ownerId != null">
                #{ownerId,jdbcType=VARCHAR},
            </if>
            <if test="balcony != null">
                #{balcony,jdbcType=INTEGER},
            </if>
            <if test="referenceScheme != null">
                #{referenceScheme,jdbcType=INTEGER},
            </if>
            <if test="imgUrl != null">
                #{imgUrl,jdbcType=VARCHAR},
            </if>
            <if test="thirdView != null">
                #{thirdView,jdbcType=BIT},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="cn.thinkfree.database.model.ProjectExample" resultType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select count(*) from project
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update project
        <set>
            <if test="record.id != null">
                id = #{record.id,jdbcType=BIGINT},
            </if>
            <if test="record.companyId != null">
                company_id = #{record.companyId,jdbcType=VARCHAR},
            </if>
            <if test="record.projectNo != null">
                project_no = #{record.projectNo,jdbcType=VARCHAR},
            </if>
            <if test="record.status != null">
                status = #{record.status,jdbcType=INTEGER},
            </if>
            <if test="record.stage != null">
                stage = #{record.stage,jdbcType=INTEGER},
            </if>
            <if test="record.createTime != null">
                create_time = #{record.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.releaseTime != null">
                release_time = #{record.releaseTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.orderSource != null">
                order_source = #{record.orderSource,jdbcType=INTEGER},
            </if>
            <if test="record.houseHuxing != null">
                house_huxing = #{record.houseHuxing,jdbcType=INTEGER},
            </if>
            <if test="record.houseRoom != null">
                house_room = #{record.houseRoom,jdbcType=INTEGER},
            </if>
            <if test="record.houseOffice != null">
                house_office = #{record.houseOffice,jdbcType=INTEGER},
            </if>
            <if test="record.houseToilet != null">
                house_toilet = #{record.houseToilet,jdbcType=INTEGER},
            </if>
            <if test="record.address != null">
                address = #{record.address,jdbcType=VARCHAR},
            </if>
            <if test="record.addressDetail != null">
                address_detail = #{record.addressDetail,jdbcType=VARCHAR},
            </if>
            <if test="record.style != null">
                style = #{record.style,jdbcType=INTEGER},
            </if>
            <if test="record.area != null">
                area = #{record.area,jdbcType=INTEGER},
            </if>
            <if test="record.houseType != null">
                house_type = #{record.houseType,jdbcType=INTEGER},
            </if>
            <if test="record.peopleNo != null">
                people_no = #{record.peopleNo,jdbcType=INTEGER},
            </if>
            <if test="record.planStartTime != null">
                plan_start_time = #{record.planStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.planEndTime != null">
                plan_end_time = #{record.planEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.decorationBudget != null">
                decoration_budget = #{record.decorationBudget,jdbcType=INTEGER},
            </if>
            <if test="record.ownerId != null">
                owner_id = #{record.ownerId,jdbcType=VARCHAR},
            </if>
            <if test="record.balcony != null">
                balcony = #{record.balcony,jdbcType=INTEGER},
            </if>
            <if test="record.referenceScheme != null">
                reference_scheme = #{record.referenceScheme,jdbcType=INTEGER},
            </if>
            <if test="record.imgUrl != null">
                img_url = #{record.imgUrl,jdbcType=VARCHAR},
            </if>
            <if test="record.thirdView != null">
                third_view = #{record.thirdView,jdbcType=BIT},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update project
        set id = #{record.id,jdbcType=BIGINT},
        company_id = #{record.companyId,jdbcType=VARCHAR},
        project_no = #{record.projectNo,jdbcType=VARCHAR},
        status = #{record.status,jdbcType=INTEGER},
        stage = #{record.stage,jdbcType=INTEGER},
        create_time = #{record.createTime,jdbcType=TIMESTAMP},
        release_time = #{record.releaseTime,jdbcType=TIMESTAMP},
        order_source = #{record.orderSource,jdbcType=INTEGER},
        house_huxing = #{record.houseHuxing,jdbcType=INTEGER},
        house_room = #{record.houseRoom,jdbcType=INTEGER},
        house_office = #{record.houseOffice,jdbcType=INTEGER},
        house_toilet = #{record.houseToilet,jdbcType=INTEGER},
        address = #{record.address,jdbcType=VARCHAR},
        address_detail = #{record.addressDetail,jdbcType=VARCHAR},
        style = #{record.style,jdbcType=INTEGER},
        area = #{record.area,jdbcType=INTEGER},
        house_type = #{record.houseType,jdbcType=INTEGER},
        people_no = #{record.peopleNo,jdbcType=INTEGER},
        plan_start_time = #{record.planStartTime,jdbcType=TIMESTAMP},
        plan_end_time = #{record.planEndTime,jdbcType=TIMESTAMP},
        decoration_budget = #{record.decorationBudget,jdbcType=INTEGER},
        owner_id = #{record.ownerId,jdbcType=VARCHAR},
        balcony = #{record.balcony,jdbcType=INTEGER},
        reference_scheme = #{record.referenceScheme,jdbcType=INTEGER},
        img_url = #{record.imgUrl,jdbcType=VARCHAR},
        third_view = #{record.thirdView,jdbcType=BIT}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="cn.thinkfree.database.model.Project">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update project
        <set>
            <if test="companyId != null">
                company_id = #{companyId,jdbcType=VARCHAR},
            </if>
            <if test="projectNo != null">
                project_no = #{projectNo,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                status = #{status,jdbcType=INTEGER},
            </if>
            <if test="stage != null">
                stage = #{stage,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="releaseTime != null">
                release_time = #{releaseTime,jdbcType=TIMESTAMP},
            </if>
            <if test="orderSource != null">
                order_source = #{orderSource,jdbcType=INTEGER},
            </if>
            <if test="houseHuxing != null">
                house_huxing = #{houseHuxing,jdbcType=INTEGER},
            </if>
            <if test="houseRoom != null">
                house_room = #{houseRoom,jdbcType=INTEGER},
            </if>
            <if test="houseOffice != null">
                house_office = #{houseOffice,jdbcType=INTEGER},
            </if>
            <if test="houseToilet != null">
                house_toilet = #{houseToilet,jdbcType=INTEGER},
            </if>
            <if test="address != null">
                address = #{address,jdbcType=VARCHAR},
            </if>
            <if test="addressDetail != null">
                address_detail = #{addressDetail,jdbcType=VARCHAR},
            </if>
            <if test="style != null">
                style = #{style,jdbcType=INTEGER},
            </if>
            <if test="area != null">
                area = #{area,jdbcType=INTEGER},
            </if>
            <if test="houseType != null">
                house_type = #{houseType,jdbcType=INTEGER},
            </if>
            <if test="peopleNo != null">
                people_no = #{peopleNo,jdbcType=INTEGER},
            </if>
            <if test="planStartTime != null">
                plan_start_time = #{planStartTime,jdbcType=TIMESTAMP},
            </if>
            <if test="planEndTime != null">
                plan_end_time = #{planEndTime,jdbcType=TIMESTAMP},
            </if>
            <if test="decorationBudget != null">
                decoration_budget = #{decorationBudget,jdbcType=INTEGER},
            </if>
            <if test="ownerId != null">
                owner_id = #{ownerId,jdbcType=VARCHAR},
            </if>
            <if test="balcony != null">
                balcony = #{balcony,jdbcType=INTEGER},
            </if>
            <if test="referenceScheme != null">
                reference_scheme = #{referenceScheme,jdbcType=INTEGER},
            </if>
            <if test="imgUrl != null">
                img_url = #{imgUrl,jdbcType=VARCHAR},
            </if>
            <if test="thirdView != null">
                third_view = #{thirdView,jdbcType=BIT},
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="cn.thinkfree.database.model.Project">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update project
        set company_id = #{companyId,jdbcType=VARCHAR},
        project_no = #{projectNo,jdbcType=VARCHAR},
        status = #{status,jdbcType=INTEGER},
        stage = #{stage,jdbcType=INTEGER},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        release_time = #{releaseTime,jdbcType=TIMESTAMP},
        order_source = #{orderSource,jdbcType=INTEGER},
        house_huxing = #{houseHuxing,jdbcType=INTEGER},
        house_room = #{houseRoom,jdbcType=INTEGER},
        house_office = #{houseOffice,jdbcType=INTEGER},
        house_toilet = #{houseToilet,jdbcType=INTEGER},
        address = #{address,jdbcType=VARCHAR},
        address_detail = #{addressDetail,jdbcType=VARCHAR},
        style = #{style,jdbcType=INTEGER},
        area = #{area,jdbcType=INTEGER},
        house_type = #{houseType,jdbcType=INTEGER},
        people_no = #{peopleNo,jdbcType=INTEGER},
        plan_start_time = #{planStartTime,jdbcType=TIMESTAMP},
        plan_end_time = #{planEndTime,jdbcType=TIMESTAMP},
        decoration_budget = #{decorationBudget,jdbcType=INTEGER},
        owner_id = #{ownerId,jdbcType=VARCHAR},
        balcony = #{balcony,jdbcType=INTEGER},
        reference_scheme = #{referenceScheme,jdbcType=INTEGER},
        img_url = #{imgUrl,jdbcType=VARCHAR},
        third_view = #{thirdView,jdbcType=BIT}
        where id = #{id,jdbcType=BIGINT}
    </update>

    <!--订单详情-->
    <select id="selectOrderDetails" resultType="cn.thinkfree.database.vo.OrderDetailsVO">
          SELECT
              p.stage,
              p.address,
              i.company_name,
              c.order_no,
              c.close_time,
              c.construction_stage,
              c.order_stage,
              p.order_source,
              u.name,
              p.address_detail,
              u.phone,
              p.house_type,
              p.decoration_budget,
              p.house_room,
              p.house_office,
              p.house_toilet,
              p.balcony,
              p.area,
              p.style,
              p.reference_scheme,
              o.remark,
              o.type,
              p.plan_start_time,
              p.plan_end_time,
              c.construction_stage,
              c.money

              FROM   project p
              LEFT JOIN design_order o ON o.project_no=p.project_no
              LEFT JOIN construction_order c ON c.project_no=p.project_no
              LEFT JOIN company_info i ON i.company_id = p.company_id
              LEFT JOIN  pc_user_info  u ON  u.id=p.owner_id
          WHERE p.project_no=#{projectNo} AND p.status=#{status}

  </select>

    <!--分页查询施工工地-->
    <select id="selectSiteDetailsByPage" resultType="cn.thinkfree.database.vo.ConstructionSiteVO">

        SELECT
        o.order_no AS orderNo,
        p.address AS address,
        i.company_name AS companyName,
        p.address_detail AS addressDetail,
        s. NAME AS OWNER,
        s.phone AS phone,
        co.money AS reducedContractAmount,
        o.order_stage AS orderStage,
        b.big_name AS constructionProgress,
        b.actual_satrt_time AS startTime,
        b.actual_end_time AS endTime,
        ur.name AS projectManager,
        ms.name AS designerName
        FROM
        project p
        LEFT JOIN construction_order co ON co.project_no = p.project_no
        LEFT JOIN user_info ur ON ur.company_id = p.company_id
        LEFT JOIN project_big_scheduling_details b ON b.project_no = p.project_no
        LEFT JOIN company_info i ON i.company_id = p.company_id
        LEFT JOIN design_order o ON o .project_no = p.project_no
        LEFT JOIN consumer_set s ON s. ID = P .owner_id
        LEFT JOIN user_info ms ON ms.user_id = o.user_id
        WHERE
        p.project_no=#{constructionSiteVO.projectNo} AND p.status=#{constructionSiteVO.status}
        <if test="pageSize != null">
            limit #{pageSize} offset #{pageNum}
        </if>
    </select>

    <!--查询施工工地总页数-->
    <select id="selectSiteDetailsCount" resultType="java.lang.Integer">

  	       SELECT
               count(1)
            FROM
                project p
            LEFT JOIN construction_order co ON co.project_no = p.project_no
            LEFT JOIN user_info ur ON ur.company_id = p.company_id
            LEFT JOIN project_big_scheduling_details b ON b.project_no = p.project_no
            LEFT JOIN company_info i ON i.company_id = p.company_id
            LEFT JOIN design_order o ON o .project_no = p.project_no
            LEFT JOIN consumer_set s ON s. ID = P .owner_id
            LEFT JOIN user_info ms ON ms.user_id = o.user_id
            WHERE
        p.project_no=#{constructionSiteVO.projectNo} AND p.status=#{constructionSiteVO.status}

  </select>

    <!--分页查询工地详情-->
    <select id="selectSiteByPage" resultType="cn.thinkfree.database.vo.SiteDetailsVO">
        SELECT
        p.stage AS stage,
        b.big_name AS constructionProject,
        b.plan_satrt_time AS startTime,
        b.plan_end_time AS endTime,
        b.is_need_check AS isAcceptance,

        b.remark AS textDetails
        FROM project p
        LEFT JOIN project_big_scheduling_details b ON b.project_no = p.project_no
        WHERE
        p.project_no=#{siteDetailsVO.projectNo} AND p.status=#{siteDetailsVO.status}
        <if test="pageSize != null">
            limit #{pageSize} offset #{pageNum}
        </if>

    </select>

    <!--查询工地总页数-->
    <select id="selectSiteCount" resultType="java.lang.Integer">
    SELECT
  count(1)
    FROM project p
    LEFT JOIN project_big_scheduling_details b ON b.project_no = p.project_no
    WHERE
    p.project_no=#{siteDetailsVO.projectNo} AND p.status=#{siteDetailsVO.status}
  </select>

</mapper>